<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Slideshow del Evento</title>
<style>
html, body { height:100%; margin:0; background:#000; }
#stage { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; }
img { max-width:100vw; max-height:100vh; object-fit:contain; border-radius:16px; box-shadow:0 40px 120px rgba(0,0,0,.6); }
.caption { position:fixed; left:20px; bottom:20px; color:#fff; font: 700 16px system-ui; text-shadow:0 1px 3px rgba(0,0,0,.8); opacity:.7; }
</style>
</head>
<body>
<div id="stage"><img id="photo" alt="" /></div>
<div class="caption">Fotos en vivo · actualiza cada 10s</div>


<script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyMMEJ7nq-UJTVIviWcPyXvltwXbpzkfKPlDZePGBdDszJZUvuNdeFPQ__Z-pfdjA14xQ/exec'; // <-- misma URL que antes
const INTERVAL_MS = 5000; // tiempo por foto
const REFRESH_MS = 10000; // cada cuánto reconsultar la lista de Drive


let items = [];
let idx = 0;
const img = document.getElementById('photo');


async function fetchList() {
try {
const res = await fetch(SCRIPT_URL + '?mode=list');
const json = await res.json();
if (json.ok && Array.isArray(json.items)) {
items = json.items;
// reset índice para mostrar las nuevas primero
idx = 0;
}
} catch (e) { console.error(e); }
}


function showNext() {
if (!items.length) return;
const it = items[idx % items.length];
img.src = SCRIPT_URL + '?id=' + encodeURIComponent(it.id);
idx++;
}


(async function init(){
await fetchList();
showNext();
setInterval(showNext, INTERVAL_MS);
setInterval(fetchList, REFRESH_MS);
})();
</script>
</body>

</html>
